{
  "enabled": true,
  "name": "Update LLMs.txt File",
  "description": "Automatically updates the llms.txt file when documentation, specifications, or repository structure changes to maintain accuracy for LLM consumption",
  "version": "1",
  "when": {
    "type": "fileEdited",
    "patterns": [
      "README.md",
      "AGENTS.md",
      "SECURITY.md",
      "LICENSE",
      "docs/src/**/*.md",
      "spec/*.md"
    ]
  },
  "then": {
    "type": "askAgent",
    "prompt": "# Update LLMs.txt File\n\nUpdate the `llms.txt` file to reflect current documentation and specifications. Follow the llms.txt specification at https://llmstxt.org/.\n\n## Quick Steps\n1. Read existing `llms.txt`\n2. Scan for markdown files: root `*.md`, `docs/src/**/*.md`, `spec/*.md`\n3. Compare with current file references\n4. Update using format: `[Name](path): description`\n5. Output ONLY the complete new file content (or \"NO CHANGE\")\n\n## File Scope (IMPORTANT)\nOnly include these files:\n- Root: `README.md`, `AGENTS.md`, `SECURITY.md`, `LICENSE`\n- `spec/*.md` files\n- `docs/src/**/*.md` files\n\nEXCLUDE: `docs/book/**` (generated), `target/`, coverage reports, lockfiles, binaries\n\n## Required Structure\n```\n# SentinelD\n> Brief project description\n\n## Documentation\n- [README](README.md): Main project documentation\n- [Security](SECURITY.md): Security policies and reporting\n\n## Specifications  \n- [Product Spec](spec/product.md): Product overview and requirements\n- [Technical Spec](spec/tech.md): Technical architecture and stack\n\n## Optional\n- [Architecture](docs/src/architecture/system-architecture.md): System design details\n```\n\n## Rules\n- Single H1 header only\n- Sections: Documentation → Specifications → Optional\n- Descriptions ≤140 chars, no trailing periods\n- Alphabetical order within sections\n- All links must be valid relative paths\n- No duplicates\n\n## Scoring (keep files scoring ≥2)\n+1 each for: explains purpose/architecture, defines specifications, critical for operators, cross-cutting policy, representative example\n\nOutput the complete updated `llms.txt` content or \"NO CHANGE\" if no updates needed."
  }
}
